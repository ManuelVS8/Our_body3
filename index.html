<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Body - Learning App</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background-color: #f0f8ff;
color: #333;
line-height: 1.6;
padding: 20px;
min-height: 100vh;
display: flex;
flex-direction: column;
align-items: center;
}

.container {
background-color: white;
width: 100%;
max-width: 1000px;
margin: 0 auto;
padding: 20px;
border-radius: 15px;
box-shadow: 0 5px 15px rgba(0,0,0,0.1);
position: relative;
}

.title {
color: #001DFF;
font-size: 2.5rem;
text-align: center;
margin: 20px 0 40px 0;
font-weight: bold;
}

.sound-control {
position: absolute;
top: 15px;
right: 15px;
background-color: #e74c3c;
width: 50px;
height: 50px;
border-radius: 50%;
display: flex;
justify-content: center;
align-items: center;
color: white;
font-weight: bold;
cursor: pointer;
box-shadow: 0 4px 8px rgba(0,0,0,0.2);
transition: transform 0.2s ease;
border: none;
font-size: 1.2rem;
}

.sound-control:active {
transform: scale(0.96);
}

.category-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 20px;
margin: 40px 0 30px 0;
}

.home-image {
max-width: 400px;
width: 100%;
height: auto;
border-radius: 15px;
display: block;
margin: 20px auto 0 auto;
}

.category-card {
background-color: #E8EAFF;
color: #333;
border: none;
padding: 20px;
font-size: 1rem;
border-radius: 10px;
cursor: pointer;
transition: all 0.3s ease;
font-weight: bold;
box-shadow: 0 4px 8px rgba(0,0,0,0.1);
text-align: center;
}

.category-card:hover {
background-color: #D0D4FF;
transform: translateY(-3px);
box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

.category-card h3 {
color: #000000;
font-size: 1.3rem;
margin-bottom: 10px;
}

.category-card p {
color: #000;
font-size: 0.95rem;
font-weight: normal;
display: none;
}

.theory-container {
max-width: 800px;
margin: 0 auto;
padding: 20px;
}

.theory-content {
background-color: #f8f9fa;
padding: 20px;
border-radius: 10px;
margin: 20px 0;
box-shadow: 0 2px 4px rgba(0,0,0,0.05);
border-left: 5px solid #001DFF;
}

.theory-english {
color: #333;
font-size: 1.1rem;
line-height: 1.6;
margin-bottom: 20px;
}

.theory-spanish {
color: #666;
font-size: 1rem;
line-height: 1.5;
font-style: italic;
}

.theory-english strong {
color: #001DFF;
font-weight: bold;
}

.play-button, .back-button, .check-button, .continue-button {
background-color: #ffa420;
color: white;
border: none;
padding: 12px 24px;
font-size: 1rem;
border-radius: 8px;
cursor: pointer;
transition: background-color 0.3s ease, transform 0.2s ease;
font-weight: bold;
margin: 10px;
display: inline-block;
}

.check-button {
background-color: #001DFF;
}

.continue-button {
background-color: #9fb7f4;
}

.back-button {
background-color: #ffa420;
}

.play-button:hover, .back-button:hover {
background-color: #e6941a;
transform: translateY(-2px);
}

.check-button:hover {
background-color: #0015cc;
transform: translateY(-2px);
}

.continue-button:hover {
background-color: #7a9bd6;
transform: translateY(-2px);
}

.game-container {
padding: 20px;
text-align: center;
}

.game-instruction {
font-size: 1.5rem;
color: #001DFF;
margin: 20px 0;
font-weight: bold;
text-align: center;
}

.progress-bar {
width: 100%;
height: 20px;
background: #ddd;
border-radius: 10px;
margin: 20px 0;
overflow: hidden;
}

.progress-fill {
height: 100%;
background: #ffa420;
width: 0%;
transition: width 0.4s ease;
border-radius: 10px;
}

.level-indicator {
font-size: 1.2rem;
color: #001DFF;
margin: 10px 0;
font-weight: bold;
}

.timer {
font-size: 1.2rem;
color: #27ae60;
margin: 10px 0;
font-weight: bold;
}

.word-bank {
display: flex;
flex-wrap: wrap;
justify-content: center;
gap: 10px;
margin: 20px 0;
min-height: 80px;
background: #f8f9fa;
border-radius: 10px;
padding: 15px;
border: 2px dashed #ccc;
box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.word-bank.drag-over {
border-color: #001DFF;
background: #E8EAFF;
}

.word-item {
background-color: #9b59b6;
color: white;
padding: 12px 16px;
border-radius: 8px;
cursor: pointer;
font-size: 0.9rem;
min-width: 100px;
text-align: center;
user-select: none;
transition: background-color 0.2s ease, transform 0.2s ease;
border: 2px solid transparent;
}

.word-item:hover {
transform: scale(1.05);
}

.word-item.selected {
background-color: #f39c12;
box-shadow: 0 0 10px #f39c12;
}

.classification-areas {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 15px;
margin: 20px 0;
}

.classification-area {
background-color: white;
border: 2px dashed #a9cce3;
border-radius: 8px;
padding: 15px;
min-height: 120px;
cursor: pointer;
transition: border-color 0.2s ease, background-color 0.2s ease;
box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.classification-area:hover {
border-color: #2980b9;
}

.classification-area.drag-over {
background-color: #e8f4fc;
border-color: #3498db;
}

.classification-area h4 {
color: #2980b9;
margin-bottom: 10px;
font-size: 1.1rem;
}

.classification-item {
padding: 8px 12px;
border-radius: 6px;
font-size: 0.9rem;
background-color: #8e44ad;
color: #fff;
cursor: pointer;
user-select: none;
min-width: 90px;
text-align: center;
transition: background-color 0.2s ease, transform 0.2s ease;
margin: 5px;
display: inline-block;
}

.classification-item:hover {
background-color: #732d91;
}

.classification-item.correct {
background-color: #27ae60;
}

.classification-item.incorrect {
background-color: #e74c3c;
}

.cards-container {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
gap: 15px;
margin: 20px 0;
}

.memory-card {
background-color: #3498db;
color: white;
border: 3px solid transparent;
border-radius: 10px;
padding: 15px;
cursor: pointer;
transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
text-align: center;
min-height: 100px;
display: flex;
align-items: center;
justify-content: center;
font-size: 0.9rem;
font-weight: bold;
user-select: none;
}

.memory-card:hover {
transform: scale(1.05);
box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.memory-card.selected {
background-color: #f1c40f;
transform: scale(1.05);
}

.memory-card.matched {
background-color: #27ae60;
color: white;
cursor: default;
}

.quiz-options {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
gap: 15px;
margin: 20px 0;
}

.quiz-option {
background-color: #E8EAFF;
color: #001DFF;
border: 3px solid transparent;
border-radius: 10px;
padding: 15px;
cursor: pointer;
transition: all 0.3s ease;
text-align: center;
font-weight: bold;
}

.quiz-option:hover {
background-color: #D0D4FF;
transform: translateY(-2px);
}

.quiz-option.correct {
background-color: #27ae60;
color: white;
border-color: #27ae60;
}

.quiz-option.incorrect {
background-color: #e74c3c;
color: white;
border-color: #e74c3c;
}

.quiz-question {
background-color: #f8f9fa;
border-radius: 10px;
padding: 20px;
margin: 20px 0;
font-size: 1.2rem;
color: #333;
text-align: center;
border-left: 5px solid #001DFF;
box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.final-screen {
text-align: center;
padding: 40px 20px;
}

.score-label {
font-size: 1.5rem;
color: #001DFF;
margin: 10px 0;
}

.score-display {
font-size: 3rem;
color: #001DFF;
font-weight: bold;
margin: 20px 0;
}

.time-display {
font-size: 1.3rem;
color: #ffa420;
margin: 6px 0;
font-weight: bold;
}

.trophy {
font-size: 5rem;
color: gold;
text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
margin: 10px 0;
animation: bounce 2s infinite;
}

@keyframes bounce {
0%, 100% {
transform: translateY(0);
}
50% {
transform: translateY(-15px);
}
}

.final-message {
font-size: 1.2rem;
color: #2c3e50;
margin: 15px 0;
}

.credits {
font-size: 0.95rem;
color: #2c3e50;
margin: 16px 0 4px 0;
font-style: italic;
}

.school-logo {
max-width: 200px;
width: 100%;
height: auto;
border-radius: 10px;
display: block;
margin: 20px auto;
}

.modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.7);
display: flex;
align-items: center;
justify-content: center;
z-index: 1000;
}

.modal-content {
background-color: white;
padding: 30px;
border-radius: 15px;
text-align: center;
max-width: 400px;
width: 90%;
box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.modal-content h3 {
font-size: 1.3rem;
color: #2c3e50;
margin-bottom: 20px;
}

.modal-buttons {
display: flex;
justify-content: center;
gap: 15px;
margin-top: 20px;
}

.modal-button {
padding: 10px 20px;
border: none;
border-radius: 8px;
font-size: 1rem;
font-weight: bold;
cursor: pointer;
transition: background-color 0.2s ease;
}

.modal-button:first-child {
background-color: #001DFF;
color: white;
}

.modal-button:first-child:hover {
background-color: #0015cc;
}

.modal-button:last-child {
background-color: #95a5a6;
color: white;
}

.modal-button:last-child:hover {
background-color: #7f8c8d;
}

.confetti {
position: fixed;
width: 10px;
height: 10px;
background: #ffa420;
animation: confetti-fall 3s linear forwards;
z-index: 999;
border-radius: 2px;
}

@keyframes confetti-fall {
0% {
transform: translateY(-10px) rotate(0deg);
opacity: 1;
}
100% {
transform: translateY(100vh) rotate(720deg);
opacity: 0;
}
}

.hidden {
display: none;
}

@media (max-width: 768px) {
.title {
font-size: 2rem;
}

.category-grid {
grid-template-columns: 1fr;
}

.classification-areas {
grid-template-columns: 1fr;
}

.cards-container {
grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}

.score-display {
font-size: 1.8rem;
}

.container {
margin: 10px;
padding: 15px;
}
}
</style>
</head>
<body>
<div class="container">
<button class="sound-control" id="soundControl">🔊</button>

<!-- Main Menu Screen -->
<div id="mainMenu" class="screen">
<h1 class="title">Our Body</h1>
<div class="category-grid">
<div class="category-card" onclick="showTheory('ourBody')">
<h3>The Human Body</h3>
<p>Learn about the parts of the human body</p>
</div>
<div class="category-card" onclick="showTheory('periodsOfLife')">
<h3>Periods of Life</h3>
<p>Discover the different stages of human life</p>
</div>
<div class="category-card" onclick="showTheory('vitalFunctions')">
<h3>Vital Functions</h3>
<p>Understand the three vital functions</p>
</div>
<div class="category-card" onclick="showTheory('bodySystems')">
<h3>Body Systems</h3>
<p>Explore the functions of body systems</p>
</div>
</div>
<img src="https://raw.githubusercontent.com/ManuelVS8/Efectos_audio/refs/heads/main/Ni%C3%B1os.png" alt="Children Learning" class="home-image">
</div>

<!-- Theory Screens -->
<div id="theoryOurBody" class="screen hidden">
<button class="back-button" onclick="showConfirmModal()">Back to menu</button>
<div class="theory-container">
<h2 class="title">The Human Body</h2>
<div class="theory-content">
<div class="theory-english">
<strong>THE HUMAN BODY</strong><br>
Humans are mammals. We are different from animals because we can think and speak.<br>
We are composed of three parts: <strong>head, trunk and limbs</strong>:<br>
• <strong>Head</strong>: eyes, ears, nose, mouth, hair.<br>
• <strong>Torso</strong>: chest, neck, belly button.<br>
• <strong>Limbs</strong>: upper limbs and lower limbs:<br>
&nbsp;&nbsp;• <strong>Upper limbs</strong>: arm, hand.<br>
&nbsp;&nbsp;• <strong>Lower limbs</strong>: leg, knee and foot.
</div>
<div class="theory-spanish">
<strong>El cuerpo humano</strong><br>
Los humanos son mamíferos. Somos diferentes de los animales porque podemos pensar y hablar.<br>
Estamos compuestos por tres partes: <strong>cabeza, tronco y extremidades</strong>:<br>
• <strong>Cabeza</strong>: ojos, orejas, nariz, boca, cabello.<br>
• <strong>Torso</strong>: pecho, cuello, ombligo.<br>
• <strong>Extremidades</strong>: extremidades superiores e inferiores:<br>
&nbsp;&nbsp;• <strong>Extremidades superiores</strong>: brazo, mano.<br>
&nbsp;&nbsp;• <strong>Extremidades inferiores</strong>: pierna, rodilla y pie.
</div>
</div>
<button class="play-button" onclick="startGame('ourBody')">Play</button>
</div>
</div>

<div id="theoryPeriodsOfLife" class="screen hidden">
<button class="back-button" onclick="showConfirmModal()">Back to menu</button>
<div class="theory-container">
<h2 class="title">Periods of Life</h2>
<div class="theory-content">
<div class="theory-english">
<strong>PERIODS OF LIFE</strong><br><br>
<strong>0 – 11</strong> → <strong>Childhood</strong> – We pass from babies to boys and girls.<br>
<strong>12 – 15</strong> → <strong>Adolescence</strong> – Physical changes: body hair, beard, breasts, etc.<br>
<strong>16 – 25</strong> → <strong>Youth</strong> – End of the physical changes.<br>
<strong>26 – 70</strong> → <strong>Adult</strong> – Period of maturity and responsibilities: work, family…<br>
<strong>+70</strong> → <strong>Elderly</strong> – We lose strength and agility. It is the last stage of life.
</div>
<div class="theory-spanish">
<strong>Períodos de la vida</strong><br><br>
<strong>0 – 11</strong> → <strong>Infancia</strong> – Pasamos de bebés a niños y niñas.<br>
<strong>12 – 16</strong> → <strong>Adolescencia</strong> – Cambios físicos: vello corporal, barba, senos, etc.<br>
<strong>16 – 25</strong> → <strong>Juventud</strong> – Fin de los cambios físicos.<br>
<strong>25 – 70</strong> → <strong>Adulto</strong> – Periodo de madurez y responsabilidades: trabajo, familia...<br>
<strong>+70</strong> → <strong>Ancianos</strong> – Perdemos fuerza y agilidad. Es la última etapa de la vida.
</div>
</div>
<button class="play-button" onclick="startGame('periodsOfLife')">Play</button>
</div>
</div>

<div id="theoryVitalFunctions" class="screen hidden">
<button class="back-button" onclick="showConfirmModal()">Back to menu</button>
<div class="theory-container">
<h2 class="title">Vital Functions</h2>
<div class="theory-content">
<div class="theory-english">
<strong>VITAL FUNCTIONS</strong><br><br>
There are three vital functions:<br>
• <strong>Nutrition</strong>: we obtain nutrients from food.<br>
• <strong>Interaction</strong>: we obtain information through the senses and react.<br>
• <strong>Reproduction</strong>: we can reproduce.<br><br>
Body systems are responsible for the vital functions:<br>
• <strong>Nutrition</strong>: digestive, respiratory, circulatory and excretory systems.<br>
• <strong>Interaction</strong>: senses (sight, smell, hearing, taste and touch), Nervous system (nerves and brain) and locomotor system (muscles and bones).<br>
• <strong>Reproduction</strong>: male and female reproductive systems.
</div>
<div class="theory-spanish">
<strong>Funciones vitales (procesos vitales):</strong><br><br>
Hay tres funciones vitales:<br>
• <strong>Nutrición</strong>: obtenemos nutrientes de los alimentos.<br>
• <strong>Interacción</strong>: obtenemos información a través de los sentidos y reaccionamos.<br>
• <strong>Reproducción</strong>: podemos reproducirnos.<br><br>
Los aparatos del cuerpo son responsables de las funciones vitales:<br>
• <strong>Nutrición</strong>: sistemas digestivo, respiratorio, circulatorio y excretor.<br>
• <strong>Relación</strong>: sentidos (vista, olfato, oído, gusto y tacto), sistema nervioso (nervios y cerebro) y aparato locomotor (músculos y huesos).<br>
• <strong>Reproducción</strong>: aparato reproductor masculino y femenino.
</div>
</div>
<button class="play-button" onclick="startGame('vitalFunctions')">Play</button>
</div>
</div>

<div id="theoryBodySystems" class="screen hidden">
<button class="back-button" onclick="showConfirmModal()">Back to menu</button>
<div class="theory-container">
<h2 class="title">Body Systems</h2>
<div class="theory-content">
<div class="theory-english">
<strong>Functions of body systems</strong><br><br>
• <strong>Digestive system</strong>: obtains nutrients from food.<br>
• <strong>Respiratory system</strong>: obtains oxygen from the air.<br>
• <strong>Circulatory system</strong>: transports blood around the body.<br>
• <strong>Excretory system</strong>: cleans the blood.<br>
• <strong>Senses</strong>: obtain information.<br>
• <strong>Nervous system</strong>: transports information and decides a response.<br>
• <strong>Locomotor system</strong>: makes movements.<br>
• <strong>Reproductive system</strong>: produces new living things.
</div>
<div class="theory-spanish">
<strong>Funciones de los aparatos del cuerpo</strong><br><br>
• <strong>Sistema digestivo</strong>: obtiene nutrientes de los alimentos.<br>
• <strong>Sistema respiratorio</strong>: obtiene oxígeno del aire.<br>
• <strong>Sistema circulatorio</strong>: transporta sangre por todo el cuerpo.<br>
• <strong>Sistema excretor</strong>: limpia la sangre.<br>
• <strong>Sentidos</strong>: obtener información.<br>
• <strong>Sistema nervioso</strong>: transporta información y decide una respuesta.<br>
• <strong>Aparato locomotor</strong>: realiza movimientos.<br>
• <strong>Sistema reproductivo</strong>: produce nuevos seres vivos.
</div>
</div>
<button class="play-button" onclick="startGame('bodySystems')">Play</button>
</div>
</div>

<!-- Game Screen -->
<div id="gameScreen" class="screen hidden">
<button class="back-button" onclick="showConfirmModal()">Back to menu</button>
<div class="game-container">
<h2 class="title" id="gameTitle">Game</h2>
<div class="level-indicator" id="levelIndicator"></div>
<div class="timer" id="timer">Time: 00:00</div>
<div class="progress-bar">
<div class="progress-fill" id="progressFill"></div>
</div>
<div class="game-instruction" id="gameInstruction"></div>
<div id="gameContent"></div>
<div id="gameButtons"></div>
</div>
</div>

<!-- Final Screen -->
<div id="finalScreen" class="screen hidden">
<div class="final-screen">
<h2 class="title" id="finalTitle">The Human Body</h2>
<div class="score-label">Your score:</div>
<div class="score-display" id="finalScore">0</div>
<div class="time-display" id="timeDisplay">Time: 00:00</div>
<div class="trophy hidden" id="trophyIcon">🏆</div>
<div class="final-message" id="finalMessage">Well done! Keep practising!</div>
<div class="credits">Created by Manuel J. Ventura</div>
<img src="https://raw.githubusercontent.com/ManuelVS8/Efectos_audio/1e2a36cdd1f8bedcb578a30f5ec5cc8f21c287fe/Siurot.png" alt="School Logo" class="school-logo">
<br>
<button class="back-button" onclick="backToMenu()">Back to menu</button>
</div>
</div>

<!-- Confirmation Modal -->
<div id="confirmModal" class="modal hidden">
<div class="modal-content">
<h3>Finish and back to the menu?</h3>
<div class="modal-buttons">
<button class="modal-button" onclick="confirmBack()">Yes</button>
<button class="modal-button" onclick="hideConfirmModal()">No</button>
</div>
</div>
</div>
</div>

<script>
// Audio setup
let soundEnabled = true;
const audioUrls = {
correct: 'https://raw.githubusercontent.com/ManuelVS8/Efectos_audio/7b86808e254100aeaba6285b3e0b82650ae78055/Correcto.mp3',
error: 'https://raw.githubusercontent.com/ManuelVS8/Efectos_audio/7b86808e254100aeaba6285b3e0b82650ae78055/Error.mp3',
completed: 'https://raw.githubusercontent.com/ManuelVS8/Efectos_audio/7b86808e254100aeaba6285b3e0b82650ae78055/Completado.mp3',
victory: 'https://raw.githubusercontent.com/ManuelVS8/Efectos_audio/7b86808e254100aeaba6285b3e0b82650ae78055/Termin%C3%A9.mp3',
tap: 'https://raw.githubusercontent.com/ManuelVS8/Efectos_audio/37b3eb2da9c15c04dfb71dfe1be60f088ea3cdfc/Tap.mp3'
};

const audioObjects = {};

// Create audio instances
Object.keys(audioUrls).forEach(key => {
audioObjects[key] = new Audio(audioUrls[key]);
audioObjects[key].preload = 'auto';
audioObjects[key].volume = 1.0;
});

function playSound(soundType) {
if (!soundEnabled || !audioObjects[soundType]) return;

try {
const audio = audioObjects[soundType];
audio.currentTime = 0;
audio.play().catch(error => {
console.log(`Audio play failed for ${soundType}:`, error);
});
} catch (error) {
console.log(`Audio error for ${soundType}:`, error);
}
}

function toggleSound() {
soundEnabled = !soundEnabled;
document.getElementById('soundControl').textContent = soundEnabled ? '🔊' : '🔇';
}

document.getElementById('soundControl').onclick = toggleSound;

// Game state
let currentGame = null;
let currentLevel = 1;
let maxLevels = 1;
let correctAnswers = 0;
let totalQuestions = 0;
let gameData = {};
let gameStartTime = 0;
let timerInterval = null;

// Category titles
const categoryTitles = {
'ourBody': 'The Human Body',
'periodsOfLife': 'Periods of Life',
'vitalFunctions': 'Vital Functions',
'bodySystems': 'Body Systems'
};

// Game definitions
const games = {
ourBody: {
title: 'The Human Body',
instruction: 'Classify the body parts.',
type: 'classification',
words: ['eyes', 'ears', 'nose', 'mouth', 'hair', 'chest', 'neck', 'belly button', 'arm', 'hand', 'leg', 'knee', 'foot'],
categories: {
'Head': ['eyes', 'ears', 'nose', 'mouth', 'hair'],
'Torso': ['chest', 'neck', 'belly button'],
'Upper limbs': ['arm', 'hand'],
'Lower limbs': ['leg', 'knee', 'foot']
}
},
periodsOfLife: {
title: 'Periods of Life',
instruction: 'Select the age and the correct period:',
type: 'quiz',
levels: 2,
questions: [
'We pass from babies to boys and girls.',
'Physical changes: body hair, beard, breasts, etc.',
'End of the physical changes.',
'Period of maturity and responsibilities: work, family…',
'We lose strength and agility. It is the last stage of life.'
],
level1Options: ['0 – 11', '12 – 15', '16 – 25', '26 – 70', '+ 70'],
level2Options: ['Childhood', 'Adolescence', 'Youth', 'Adult', 'Elderly'],
answers: [0, 1, 2, 3, 4]
},
vitalFunctions: {
title: 'Vital Functions',
type: 'multilevel',
levels: 3,
level1: {
instruction: 'Identify the vital functions:',
type: 'memory',
pairs: [
['Nutrition', 'we obtain nutrients from food'],
['Interaction', 'we obtain information through the senses and react'],
['Reproduction', 'we can reproduce']
]
},
level2: {
instruction: 'Classify the body systems:',
type: 'classification',
words: ['digestive', 'respiratory', 'circulatory', 'excretory', 'senses', 'nervous', 'locomotor', 'reproductive'],
categories: {
'Nutrition': ['digestive', 'respiratory', 'circulatory', 'excretory'],
'Interaction': ['senses', 'nervous', 'locomotor'],
'Reproduction': ['reproductive']
}
},
level3: {
instruction: 'Interaction. Classify the systems:',
type: 'classification',
words: ['sight', 'smell', 'hearing', 'taste', 'touch', 'nerves', 'brain', 'muscles', 'bones'],
categories: {
'Senses': ['sight', 'smell', 'hearing', 'taste', 'touch'],
'Nervous system': ['nerves', 'brain'],
'Locomotor system': ['muscles', 'bones']
}
}
},
bodySystems: {
title: 'Body Systems',
instruction: 'Classify the body systems with their functions:',
type: 'memory',
pairs: [
['Digestive system', 'obtains nutrients from food'],
['Respiratory system', 'obtains oxygen from the air'],
['Circulatory system', 'transports blood around the body'],
['Excretory system', 'cleans the blood'],
['Senses', 'obtain information'],
['Nervous system', 'transports information and decides a response'],
['Locomotor system', 'makes movements'],
['Reproductive system', 'produces new living things']
]
}
};

// Timer functions
function startTimer() {
gameStartTime = Date.now();
timerInterval = setInterval(updateTimer, 1000);
}

function stopTimer() {
if (timerInterval) {
clearInterval(timerInterval);
timerInterval = null;
}
}

function updateTimer() {
const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
const seconds = (elapsed % 60).toString().padStart(2, '0');
document.getElementById('timer').textContent = `Time: ${minutes}:${seconds}`;
}

function formatTime(seconds) {
const minutes = Math.floor(seconds / 60).toString().padStart(2, '0');
const secs = (seconds % 60).toString().padStart(2, '0');
return `${minutes}:${secs}`;
}

// Screen management
function showScreen(screenId) {
document.querySelectorAll('.screen').forEach(screen => {
screen.classList.add('hidden');
});
document.getElementById(screenId).classList.remove('hidden');
}

function showTheory(category) {
playSound('tap');
showScreen('theory' + category.charAt(0).toUpperCase() + category.slice(1));
}

function startGame(gameType) {
playSound('tap');
currentGame = gameType;
currentLevel = 1;
correctAnswers = 0;
totalQuestions = 0;

const game = games[gameType];
maxLevels = game.levels || 1;

showScreen('gameScreen');
document.getElementById('gameTitle').textContent = game.title;

startTimer();

if (game.type === 'multilevel') {
loadMultilevelGame(game, currentLevel);
} else {
loadSingleGame(game);
}
}

function loadSingleGame(game) {
document.getElementById('levelIndicator').textContent = '';
updateProgress(0);

if (game.type === 'classification') {
totalQuestions = game.words.length;
loadClassificationGame(game);
} else if (game.type === 'quiz') {
totalQuestions = game.questions.length;
loadQuizGame(game);
} else if (game.type === 'memory') {
totalQuestions = game.pairs.length;
loadMemoryGame(game);
}
}

function loadMultilevelGame(game, level) {
document.getElementById('levelIndicator').textContent = `Level ${level}/${game.levels}`;
updateProgress(0);

const levelData = game[`level${level}`];
document.getElementById('gameInstruction').textContent = levelData.instruction;

if (levelData.type === 'classification') {
totalQuestions += levelData.words.length;
loadClassificationGame(levelData);
} else if (levelData.type === 'memory') {
totalQuestions += levelData.pairs.length;
loadMemoryGame(levelData);
}
}

function loadClassificationGame(game) {
document.getElementById('gameInstruction').textContent = game.instruction;

const shuffledWords = [...game.words].sort(() => Math.random() - 0.5);

let gameContent = `
<div class="word-bank" id="wordBank">
${shuffledWords.map(word =>
`<div class="word-item" draggable="true" data-word="${word}">${word}</div>`
).join('')}
</div>
<div class="classification-areas">
${Object.keys(game.categories).map(category => `
<div class="classification-area" data-category="${category}">
<h4>${category}</h4>
<div class="category-items" id="category-${category}"></div>
</div>
`).join('')}
</div>
`;

document.getElementById('gameContent').innerHTML = gameContent;
document.getElementById('gameButtons').innerHTML = currentGame === 'periodsOfLife' ? '' : '<button class="check-button" onclick="checkClassification()">Check</button>';

gameData.selectedWord = null;
gameData.categories = game.categories;
gameData.answers = {};
gameData.allWords = [...game.words];

// Add event listeners
setupClassificationEvents();
}

function setupClassificationEvents() {
// Word bank events
const wordBank = document.getElementById('wordBank');

// Bank drop events
wordBank.ondragover = (e) => {
e.preventDefault();
wordBank.classList.add('drag-over');
};

wordBank.ondragleave = () => {
wordBank.classList.remove('drag-over');
};

wordBank.ondrop = (e) => {
e.preventDefault();
wordBank.classList.remove('drag-over');
const word = e.dataTransfer.getData('text/plain');
if (word) {
returnWordToBank(word);
}
};

// Word items events
document.querySelectorAll('#wordBank .word-item').forEach(item => {
item.onclick = () => selectWord(item);

item.ondragstart = (e) => {
e.dataTransfer.setData('text/plain', item.dataset.word);
gameData.draggedWord = item.dataset.word;
};
});

// Classification areas events
document.querySelectorAll('.classification-area').forEach(area => {
area.onclick = (e) => {
if (e.target === area || e.target.tagName === 'H4' || e.target.classList.contains('category-items')) {
placeWord(area.dataset.category);
}
};

area.ondragover = (e) => {
e.preventDefault();
area.classList.add('drag-over');
};

area.ondragleave = () => {
area.classList.remove('drag-over');
};

area.ondrop = (e) => {
e.preventDefault();
area.classList.remove('drag-over');
const word = e.dataTransfer.getData('text/plain');
if (word) {
gameData.selectedWord = word;
placeWord(area.dataset.category);
}
};
});
}

function selectWord(element) {
playSound('tap');

document.querySelectorAll('.word-item, .classification-item').forEach(item => {
item.classList.remove('selected');
});

element.classList.add('selected');
gameData.selectedWord = element.dataset.word;
}

function placeWord(category) {
if (!gameData.selectedWord) return;

playSound('tap');

const wordToPlace = gameData.selectedWord;

// Remove from current location
removeWordFromCurrentLocation(wordToPlace);

// Add to new category
addWordToCategory(wordToPlace, category);

// Store answer and clear selection
gameData.answers[wordToPlace] = category;
gameData.selectedWord = null;

document.querySelectorAll('.word-item, .classification-item').forEach(item => {
item.classList.remove('selected');
});
}

function removeWordFromCurrentLocation(word) {
// Remove from word bank
const bankItem = document.querySelector(`#wordBank [data-word="${word}"]`);
if (bankItem) {
bankItem.remove();
}

// Remove from categories
document.querySelectorAll('.classification-item').forEach(item => {
if (item.dataset.word === word) {
delete gameData.answers[word];
item.remove();
}
});
}

function addWordToCategory(word, category) {
const categoryContainer = document.getElementById(`category-${category}`);
const wordElement = document.createElement('div');
wordElement.className = 'classification-item';
wordElement.textContent = word;
wordElement.dataset.word = word;
wordElement.draggable = true;

wordElement.onclick = () => returnWordToBank(word);

wordElement.ondragstart = (e) => {
e.dataTransfer.setData('text/plain', word);
gameData.draggedWord = word;
};

categoryContainer.appendChild(wordElement);
}

function returnWordToBank(word) {
playSound('tap');

// Remove from category
document.querySelectorAll('.classification-item').forEach(item => {
if (item.dataset.word === word) {
delete gameData.answers[word];
item.remove();
}
});

// Add back to bank
const wordBank = document.getElementById('wordBank');
const wordElement = document.createElement('div');
wordElement.className = 'word-item';
wordElement.textContent = word;
wordElement.dataset.word = word;
wordElement.draggable = true;

wordElement.onclick = () => selectWord(wordElement);

wordElement.ondragstart = (e) => {
e.dataTransfer.setData('text/plain', word);
gameData.draggedWord = word;
};

wordBank.appendChild(wordElement);
}

function loadMemoryGame(game) {
document.getElementById('gameInstruction').textContent = game.instruction;

const allCards = [...game.pairs.flat()].sort(() => Math.random() - 0.5);

let gameContent = `
<div class="cards-container">
${allCards.map((card, index) =>
`<div class="memory-card" onclick="selectCard(this, '${card}')" data-card="${card}">${card}</div>`
).join('')}
</div>
`;

document.getElementById('gameContent').innerHTML = gameContent;
document.getElementById('gameButtons').innerHTML = '';

gameData.pairs = game.pairs;
gameData.selectedCards = [];
gameData.matchedPairs = 0;
gameData.processing = false;
}

function selectCard(element, cardText) {
if (element.classList.contains('matched') || gameData.processing) return;

playSound('tap');

if (element.classList.contains('selected')) {
element.classList.remove('selected');
gameData.selectedCards = gameData.selectedCards.filter(card => card.element !== element);
} else {
element.classList.add('selected');
gameData.selectedCards.push({ element, text: cardText });

if (gameData.selectedCards.length >= 2) {
checkForMatches();
}
}
}

function checkForMatches() {
if (gameData.processing) return;

gameData.processing = true;

const matchedPairs = [];
const remainingCards = [...gameData.selectedCards];

gameData.pairs.forEach(pair => {
const card1Index = remainingCards.findIndex(card => card.text === pair[0]);
const card2Index = remainingCards.findIndex(card => card.text === pair[1]);

if (card1Index !== -1 && card2Index !== -1) {
matchedPairs.push([remainingCards[card1Index], remainingCards[card2Index]]);
if (card1Index > card2Index) {
remainingCards.splice(card1Index, 1);
remainingCards.splice(card2Index, 1);
} else {
remainingCards.splice(card2Index, 1);
remainingCards.splice(card1Index, 1);
}
}
});

setTimeout(() => {
if (matchedPairs.length > 0) {
playSound('correct');
matchedPairs.forEach(([card1, card2]) => {
card1.element.classList.remove('selected');
card2.element.classList.remove('selected');
card1.element.classList.add('matched');
card2.element.classList.add('matched');
gameData.matchedPairs++;
correctAnswers++;
});
}

if (remainingCards.length > 0) {
playSound('error');
remainingCards.forEach(card => {
card.element.classList.remove('selected');
});
}

gameData.selectedCards = [];
gameData.processing = false;

updateProgress((gameData.matchedPairs / gameData.pairs.length) * 100);

if (gameData.matchedPairs === gameData.pairs.length) {
handleLevelComplete();
}
}, 700);
}

function loadQuizGame(game) {
document.getElementById('gameInstruction').textContent = game.instruction;

const questionIndices = Array.from({length: game.questions.length}, (_, i) => i);

gameData.currentQuestion = 0;
gameData.level1Complete = false;
gameData.level1Questions = questionIndices.sort(() => Math.random() - 0.5).map(i => ({
text: game.questions[i],
answer: game.answers[i]
}));
gameData.level2Questions = questionIndices.sort(() => Math.random() - 0.5).map(i => ({
text: game.questions[i],
answer: game.answers[i]
}));
gameData.level1Options = game.level1Options;
gameData.level2Options = game.level2Options;

showNextQuestion();
}

function showNextQuestion() {
if (gameData.currentQuestion >= gameData.level1Questions.length) {
if (!gameData.level1Complete) {
gameData.level1Complete = true;
gameData.currentQuestion = 0;
document.getElementById('levelIndicator').textContent = `Level 2/2`;
updateProgress(50);
setTimeout(() => {
showNextQuestion();
}, 1000);
return;
} else {
showFinalScreen();
return;
}
}

const currentQuestions = gameData.level1Complete ? gameData.level2Questions : gameData.level1Questions;
const question = currentQuestions[gameData.currentQuestion];
const isLevel2 = gameData.level1Complete;
const options = isLevel2 ? gameData.level2Options : gameData.level1Options;
const shuffledOptions = [...options].sort(() => Math.random() - 0.5);

if (!isLevel2) {
document.getElementById('levelIndicator').textContent = `Level 1/2`;
}

let gameContent = `
<div class="quiz-question">${question.text}</div>
<div class="quiz-options">
${shuffledOptions.map(option =>
`<div class="quiz-option" onclick="selectQuizOption('${option}', ${question.answer})">${option}</div>`
).join('')}
</div>
`;

document.getElementById('gameContent').innerHTML = gameContent;
}

function selectQuizOption(option, correctAnswerIndex) {
playSound('tap');

const isLevel2 = gameData.level1Complete;
const correctOptions = isLevel2 ? gameData.level2Options : gameData.level1Options;
const correctAnswer = correctOptions[correctAnswerIndex];

const optionElements = document.querySelectorAll('.quiz-option');
let clickedElement = null;

optionElements.forEach(el => {
if (el.textContent === option) {
clickedElement = el;
}
});

if (option === correctAnswer) {
playSound('correct');
clickedElement.classList.add('correct');
correctAnswers++;
} else {
playSound('error');
clickedElement.classList.add('incorrect');
}

optionElements.forEach(opt => {
opt.onclick = null;
opt.style.pointerEvents = 'none';
});

setTimeout(() => {
gameData.currentQuestion++;

// Calculate total progress for the entire game
const totalQuestionsInGame = gameData.level1Questions.length + gameData.level2Questions.length;
const questionsAnswered = (isLevel2 ? gameData.level1Questions.length + gameData.currentQuestion : gameData.currentQuestion);
const progressPercentage = (questionsAnswered / totalQuestionsInGame) * 100;

updateProgress(progressPercentage);
showNextQuestion();
}, 1000);
}

function checkClassification() {
if (!document.querySelector('.check-button')) return;

playSound('completed');

let correct = 0;

Object.keys(gameData.answers).forEach(word => {
const userCategory = gameData.answers[word];
const correctCategory = Object.keys(gameData.categories).find(cat =>
gameData.categories[cat].includes(word)
);

const categoryContainer = document.getElementById(`category-${userCategory}`);
if (categoryContainer) {
const elements = categoryContainer.querySelectorAll('.classification-item');
elements.forEach(element => {
if (element.dataset.word === word) {
if (userCategory === correctCategory) {
element.classList.add('correct');
correct++;
} else {
element.classList.add('incorrect');
}
}
});
}
});

correctAnswers += correct;

// Disable interactions
document.querySelectorAll('.word-item, .classification-item, .classification-area').forEach(item => {
item.onclick = null;
item.draggable = false;
item.style.pointerEvents = 'none';
});
document.getElementById('wordBank').ondrop = null;
document.getElementById('wordBank').ondragover = null;

document.getElementById('gameButtons').innerHTML = '';
updateProgress(100);

handleLevelComplete();
}

function handleLevelComplete() {
if (games[currentGame].type === 'multilevel') {
if (currentLevel < maxLevels) {
setTimeout(() => {
document.getElementById('gameButtons').innerHTML = '<button class="continue-button" onclick="continueToNextLevel()">Continue</button>';
}, 1000);
} else {
setTimeout(() => {
showFinalScreen();
}, 2000);
}
} else {
setTimeout(() => {
showFinalScreen();
}, 2000);
}
}

function continueToNextLevel() {
playSound('tap');
currentLevel++;
const game = games[currentGame];
loadMultilevelGame(game, currentLevel);
}

function updateProgress(percentage) {
document.getElementById('progressFill').style.width = percentage + '%';
}

function showFinalScreen() {
stopTimer();

let finalScore;
if (currentGame === 'vitalFunctions') {
// Get the total questions dynamically from each level
const level1Questions = games.vitalFunctions.level1.pairs.length;
const level2Questions = games.vitalFunctions.level2.words.length;
const level3Questions = games.vitalFunctions.level3.words.length;
const totalPossible = level1Questions + level2Questions + level3Questions;
finalScore = Math.round((correctAnswers / totalPossible) * 100);
} else if (currentGame === 'periodsOfLife') {
const totalPossible = 10; // 2 levels with 5 questions each
finalScore = Math.round((correctAnswers / totalPossible) * 100);
} else {
finalScore = Math.round((correctAnswers / totalQuestions) * 100);
}

const elapsedSeconds = Math.floor((Date.now() - gameStartTime) / 1000);
const timeStr = formatTime(elapsedSeconds);

document.getElementById('finalTitle').textContent = categoryTitles[currentGame];
document.getElementById('finalScore').textContent = finalScore;
document.getElementById('timeDisplay').textContent = `Time: ${timeStr}`;

if (finalScore === 100) {
document.getElementById('trophyIcon').classList.remove('hidden');
document.getElementById('finalMessage').textContent = 'Excellent! Perfect score!';
playSound('victory');
createConfetti();
} else {
document.getElementById('trophyIcon').classList.add('hidden');
document.getElementById('finalMessage').textContent = 'Well done! Keep practising!';
playSound('completed');
}

showScreen('finalScreen');
}

function createConfetti() {
const colors = ['#ffa420', '#001DFF', '#4CAF50', '#ff4757', '#ffa502'];

for (let i = 0; i < 50; i++) {
setTimeout(() => {
const confetti = document.createElement('div');
confetti.className = 'confetti';
confetti.style.left = Math.random() * 100 + '%';
confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
confetti.style.animationDelay = Math.random() * 2 + 's';
document.body.appendChild(confetti);

setTimeout(() => {
if (confetti.parentNode) {
confetti.remove();
}
}, 3000);
}, i * 100);
}
}

// Modal functions
function showConfirmModal() {
playSound('tap');
document.getElementById('confirmModal').classList.remove('hidden');
}

function hideConfirmModal() {
playSound('tap');
document.getElementById('confirmModal').classList.add('hidden');
}

function confirmBack() {
playSound('tap');
backToMenu();
}

function backToMenu() {
stopTimer();
hideConfirmModal();
showScreen('mainMenu');

currentGame = null;
currentLevel = 1;
correctAnswers = 0;
totalQuestions = 0;
gameData = {};
}

// Initialize the app
document.addEventListener('DOMContentLoaded', function() {
showScreen('mainMenu');

// Audio unlock for mobile
let audioUnlocked = false;

function unlockAudio() {
if (audioUnlocked) return;
audioUnlocked = true;

Object.values(audioObjects).forEach(audio => {
audio.volume = 0.01;
audio.play().then(() => {
audio.pause();
audio.currentTime = 0;
audio.volume = 1.0;
}).catch(() => {});
});
}

['click', 'touchstart', 'keydown'].forEach(eventType => {
document.addEventListener(eventType, unlockAudio, { once: true, passive: true });
});
});
</script>
</body>
</html>